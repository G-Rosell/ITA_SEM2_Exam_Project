@page "/koordinator-opret-vagter"
@using VagtplanApp.Client.Services
@using VagtplanApp.Shared.Model


<h1 class="mb-3 mt-3">Opret vagt</h1>

<EditForm EditContext="@aEditContext" class="row p-3" OnValidSubmit="@AddShift">
    <DataAnnotationsValidator />
    <ValidationSummary />


    <div class="col-md-6 mb-3">
        <label for="start-dato">Start dato</label>
        @*<InputDate id="start-dato" @bind-Value="vagter.StartTid" class="form-control" />*@
        <input type="datetime-local" id="start-dato" @bind="vagter.startTime" class="form-control" required />
    </div>
    <div class="col-md-6 mb-3">
        <label for="slut-dato">Slut dato</label>
        @*<InputDate id="slut-dato" @bind-Value="vagter.SlutTid" class="form-control" /> der er forskel på InputDate of type="datetime-local"*@
        <input type="datetime-local" id="slut-dato" @bind="vagter.endTime" class="form-control" />
    </div>
    <div class="col-md-6 mb-3">
        <label for="minAlder">Aldersgrænse</label>
        <InputNumber id="minAlder" @bind-Value="vagter.minAge" class="form-control" required />
    </div>
    <div class="col-md-6 mb-3">
        <label for="antalPersoner">Antal Personer</label>
        <InputNumber id="AntalPersoner" @bind-Value="vagter.numberOfPersons" class="form-control" required />
    </div>

    <div class="col-12 mb-3">
        <button type="submit" class="btn btn-primary">Tilføj</button>
    </div>
</EditForm>


@code {
    private Shift vagter = new Shift();
    private EditContext aEditContext;

    [Inject]
    private IShiftService mService { get; set; }

    private async Task AddShift()
    {
        await mService.CreateShift(vagter);
        vagter = new Shift();  //Dette peger på nyt id, så man kan oprette flere vagter
    }

    protected override void OnInitialized()
    {
        aEditContext = new EditContext(vagter);
    }
}